Краткое пояснение к ER диаграмме

В правой части диаграммы расположены открытые источники информациии,
не являющиеся частью базы данных банка, это таблицы:

-egrul - аналог Единого Государственного Реестра Юридических Лиц,
он отличается от оригинала тем, что содержит только данные, нужные для работы банка

-banks - аналог реестра кредитных организаций, содержит данные обо всех банках

-currency - классификатор валют, данные из него участвуют в формировании № счета клиента

-tax services - реестр налоговых органов по регионам,
он нужен чтобы присвоить компаниям корректные регистрационные данные для таблицы ЕГРЮЛ
эта таблица нужна только на этапе создания данных так что не связана с другими

В левой части диаграммы расположены внутренние банковские справочники:

-tariff_book - справочник тарифов

-payment_statuses - справочник статусов платежей

-payment_queue_statuses - справочник очередностей платежей в зависимости от получателя

В центре диаграммы расположены таблицы по которым с банком взаимодействуют клиенты:

-client_accounts - таблица счетов клиентов,
содержит данные о балансе и тарифе на котором счет обслуживается,
соединена с таблицей users через таблицу связей

-users - таблица пользователей, содержит учетные данные лиц,
имеющих право распоряжаться средствами на счетах, связана с таблицей
client_accounts черех таблицу связей, связана с таблицей ЕГРЮЛ,
чтобы при изменении первых лиц компаний можно было бы запретить доступ к счетам компании
старым директорам 

-client_payments - содержит данные о платежах, отправляемых клиентами нашего банка

-counterpart_accounts - таблица счетов контрагентов,
содержат данные о счетах тех, кому платили или от кого получали платежи наши клиенты

-incoming_payments - содержит данные о входящих платежах от клиентов других банков

Внизу под этими таблицами расположены таблицы bank_accounts и payments,
эти таблицы повторяют client_accounts, counterpart_accounts, client_payments, incoming_payments,
но содержат данные обо всех счетах и платежах сразу, бехз разделения на внутрибанковские и межбанковские

Первоначально, для создания корректных банковских выписок, 
все счета и платежи были созданы в этих таблицах,
по этим таблицам работали скрипты исполнения платежных поручений,
таблицы были разделены по клиентам/не клиентам после назначения всем платежам статусов




 